<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>StructureDefinition-PackagedProductDefinition-br-inv</title>
  <link rel="stylesheet" href="fhir.css"/>
</head>
<body>
<h4>Restrições</h4>
<table class="list">
<tr><td width="60"><b>Id</b></td><td><b>Grau</b></td><td><b>Caminho(s)</b></td><td><b>Detalhes</b></td><td><b>Requisitos</b></td></tr>
<tr><td>dom-2</td><td>error</td><td>PackagedProductDefinition</td><td>If the resource is contained in another resource, it SHALL NOT contain nested Resources<br/>: contained.contained.empty()</td><td></td></tr>
<tr><td>dom-3</td><td>error</td><td>PackagedProductDefinition</td><td>If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource<br/>: contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().ofType(canonical) | %resource.descendants().ofType(uri) | %resource.descendants().ofType(url))) or descendants().where(reference = '#').exists() or descendants().where(ofType(canonical) = '#').exists() or descendants().where(ofType(canonical) = '#').exists()).not()).trace('unmatched', id).empty()</td><td></td></tr>
<tr><td>dom-4</td><td>error</td><td>PackagedProductDefinition</td><td>If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated<br/>: contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()</td><td></td></tr>
<tr><td>dom-5</td><td>error</td><td>PackagedProductDefinition</td><td>If a resource is contained in another resource, it SHALL NOT have a security label<br/>: contained.meta.security.empty()</td><td></td></tr>
<tr><td>dom-6</td><td>best practice</td><td>PackagedProductDefinition</td><td>A resource should have narrative for robust management<br/>: text.`div`.exists()</td><td></td></tr>
<tr><td>ele-1</td><td>error</td><td><b>**ALL** elements</b></td><td>All FHIR elements must have a @value or children<br/>: hasValue() or (children().count() &gt; id.count())</td><td></td></tr>
<tr><td>ext-1</td><td>error</td><td><b>**ALL** extensions</b></td><td>Must have either extensions or value[x], not both<br/>: extension.exists() != value.exists()</td><td></td></tr>
<tr><td>ppd-br-001</td><td>warning</td><td>PackagedProductDefinition</td><td>EAN/GTIN deve seguir padrão de código de barras válido<br/>: identifier.where(system = 'http://hl7.org/fhir/sid/gs1').value.matches('^[0-9]{8,14}$')</td><td></td></tr>
<tr><td>ppd-br-002</td><td>error</td><td>PackagedProductDefinition</td><td>Produtos embalados devem ter pelo menos um fabricante brasileiro<br/>: manufacturer.exists()</td><td></td></tr>
<tr><td>ppd-br-003</td><td>warning</td><td>PackagedProductDefinition</td><td>DESENVOLVIMENTO: Limite de recursão de embalagens aninhadas (máximo 3 níveis)<br/>: true</td><td></td></tr>
<tr><td>ppd-br-004</td><td>warning</td><td>PackagedProductDefinition</td><td>Mudança em tipo/material de container requer novo PCID<br/>: packaging.containedItem.extension.where(url = 'http://farmaco.maxapex.net/brig/fhir/StructureDefinition/package-item-container-details').exists() implies packaging.containedItem.extension.where(url = 'http://farmaco.maxapex.net/brig/fhir/StructureDefinition/package-item-container-details').all(extension.where(url = 'containerType').valueCodeableConcept.exists())</td><td></td></tr>
<tr><td>ppd-br-005</td><td>warning</td><td>PackagedProductDefinition</td><td>Mudança em quantidade requer novo PCID<br/>: packaging.quantity.exists() and packaging.containedItem.amount.exists()</td><td></td></tr>
<tr><td>ppd-br-006</td><td>warning</td><td>PackagedProductDefinition</td><td>Motivo de mudança deve ser consistente com tipo de elemento alterado na embalagem<br/>: extension.where(url = 'http://farmaco.maxapex.net/brig/fhir/StructureDefinition/identifier-lifecycle-rules').exists() implies extension.where(url = 'http://farmaco.maxapex.net/brig/fhir/StructureDefinition/identifier-lifecycle-rules').extension.where(url = 'changeReason').valueCodeableConcept.exists()</td><td></td></tr>
<tr><td>ppd-br-007</td><td>error</td><td>PackagedProductDefinition</td><td>PCID anterior deve ser fornecido quando há mudança que requer novo PCID<br/>: extension.where(url = 'http://farmaco.maxapex.net/brig/fhir/StructureDefinition/identifier-lifecycle-rules').extension.where(url = 'changeReason').valueCodeableConcept.coding.where(code.memberOf('http://farmaco.maxapex.net/brig/fhir/ValueSet/pcid-requiring-changes')).exists() implies extension.where(url = 'http://farmaco.maxapex.net/brig/fhir/StructureDefinition/identifier-lifecycle-rules').extension.where(url = 'previousPCID').valueString.exists()</td><td></td></tr>
</table>
</body>
</html>
